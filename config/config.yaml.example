paths:
  state_path: /opt/xsmom-bot/state/state.json
  logs_dir: /opt/xsmom-bot/logs
  metrics_path: /opt/xsmom-bot/metrics/metrics.prom
exchange:
  id: bybit
  account_type: swap
  quote: USDT
  only_perps: true
  unified_margin: true
  testnet: false
  timeframe: 1h
  candles_limit: 1500
liquidity:
  max_symbols: 50
  min_usd_volume_24h: 30000000
  min_price: 0.03
execution:
  maker_first: true
  maker_ttl_secs: 45
  taker_on_strong_signal: false
  strong_signal_band: 1.75
  max_spread_bps: 8
  max_slippage_bps: 12
  pyramiding:
    enabled: true
    allow_when_rr_ge: 1.0
  cancel_open_orders_on_start: true
  min_notional_per_order_usdt: 34.0
  min_rebalance_delta_bps: 4.0
  stale_orders:
    enabled: true
    cleanup_interval_sec: 300
    max_age_sec: 600
    reprice_if_far_bps: 5
    cancel_if_not_targeted: true
    keep_reduce_only: true
  price_offset_bps: 2.0
  spread_guard:
    enabled: true
    max_spread_bps: 8.0
    skip_if_wider: true
  microstructure:
    enabled: true
    min_top_depth_usd: 2000.0
    min_obi: 0.081
  throttle:
    min_seconds_between_entries_per_symbol: 10
  fees:
    maker_fee_pct: 0.0002
    taker_fee_pct: 0.00055
    slippage_pct: 0.0002
    maker_first: true
costs:
  taker_bps: 5
  maker_bps: 1
  slippage_bps: 2
strategy:
  lookbacks:
  - 1
  - 6
  - 24
  lookback_weights:
  - 1.0
  - 1.5
  - 2.0
  z_power: 1.35
  market_neutral: true
  carry:
    enabled: true
    budget_frac: 0.35
    per_symbol_notional_cap_pct: 0.2
    max_weight_per_asset: 0.12
    gross_leverage: 0.9
    allow_directional_fallback: true
    fallback_weight_scale: 0.35
    funding:
      enabled: true
      intervals_for_mean: 6
      min_entry_apy: 0.15
      min_exit_apy: 0.08
      min_percentile_30d: 0.8
      sign_stability_k: 5
      spread_gate_bps: 10
      depth_usd_min: 2000
      hedge_preference:
      - spot
      - dated_future
      - perp_proxy
    basis:
      enabled: true
      min_entry_apy: 0.15
      min_exit_apy: 0.08
      roll_threshold_days: 5
      dte_min_days: 10
      spread_gate_bps: 10
      depth_usd_min: 3000
      hedge_preference:
      - spot
      - perp
  no_trade_bands:
    enabled: true
    z_entry: 0.65
    z_exit: 0.45
  selection:
    dynamic_k:
      enabled: true
      k_min: 2
      k_max: 8
      kappa: 5.0
      fallback_k: 6
  gross_leverage: 1.2
  max_weight_per_asset: 0.14
  per_symbol_notional_cap_pct: 0.2
  portfolio_vol_target:
    enabled: true
    target_ann_vol: 0.35
    lookback_hours: 72
    min_scale: 0.5
    max_scale: 1.6
  adx_filter:
    enabled: true
    len: 14
    min_adx: 25
    require_rising: true
    use_di_alignment: true
risk:
  kill_switch:
    daily_loss_pct: 6.0
    resume_after_minutes: 180
  risk_per_trade: 0.00533
  atr_len: 28
  atr_mult_sl: 1.65
  trailing_sl:
    enabled: true
    type: "ma_atr"
    ma_len: 34
    atr_length: 28
    multiplier: 1.5
    cooldown_bars: 0
    presets:
      default:
        ma_len: 34
        multiplier: 1.5
      fast:
        ma_len: 30
        multiplier: 1.4
      conservative:
        ma_len: 45
        multiplier: 1.6
  fast_check_seconds: 30        # REQUIRED for the fast SL/TP thread to run
  stop_timeframe: "5m"          # explicit (default is 5m if omitted)
  stop_on_close_only: false     # let stops trigger intrabar while testing
  stop_confirm_bars: 0          # no extra confirmation bars
  min_hold_minutes: 0
  trailing_debug: true
  trailing_enabled: true
  trail_atr_mult: 1.7
logging:
  level: INFO
  to_file: true
  file: /opt/xsmom-bot/logs/live.log
notes:
- 'Trailing SL set to MA-ATR (EMA 34, ATR 28, x1.5). Presets: default/fast/conservative.'
