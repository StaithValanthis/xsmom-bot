paths:
  state_path: /opt/xsmom-bot/state/state.json
  logs_dir: /opt/xsmom-bot/logs
  metrics_path: /opt/xsmom-bot/metrics/metrics.prom
exchange:
  id: bybit
  account_type: swap
  quote: USDT
  only_perps: 1
  unified_margin: 1
  testnet: 0
  timeframe: 1h
  candles_limit: 1600
liquidity:
  max_symbols: 80
  min_usd_volume_24h: 30000000
  min_price: 0.03
execution:
  maker_first: true
  maker_ttl_secs: 45
  taker_on_strong_signal: true
  strong_signal_band: 1.72
  max_spread_bps: 8
  max_slippage_bps: 12
  pyramiding:
    enabled: true
    allow_when_rr_ge: 1.0
  cancel_open_orders_on_start: 1
  min_notional_per_order_usdt: 34.0
  min_rebalance_delta_bps: 5.0
  stale_orders:
    enabled: true
    cleanup_interval_sec: 240
    max_age_sec: 540
    reprice_if_far_bps: 5
    cancel_if_not_targeted: 1
    keep_reduce_only: 1
  price_offset_bps: 2.5
  spread_guard:
    enabled: true
    max_spread_bps: 9
    skip_if_wider: true
  microstructure:
    enabled: true
    min_top_depth_usd: 3000.0
    min_obi: 0.1
  throttle:
    min_seconds_between_entries_per_symbol: 9
  fees:
    maker_fee_pct: 0.0002
    taker_fee_pct: 0.00055
    slippage_pct: 0.0002
    maker_first: 1
costs:
  taker_bps: 5
  maker_bps: 1
  slippage_bps: 2
strategy:
  lookbacks:
  - 1
  - 6
  - 24
  lookback_weights:
  - 0.823
  - 0.792
  - 1.212
  z_power: 1.35
  market_neutral: false
  carry:
    enabled: true
    budget_frac: 0.2
    per_symbol_notional_cap_pct: 0.15
    max_weight_per_asset: 0.12
    gross_leverage: 0.9
    allow_directional_fallback: 1
    fallback_weight_scale: 0.3
    funding:
      enabled: true
      intervals_for_mean: 6
      min_entry_apy: 0.18
      min_exit_apy: 0.1
      min_percentile_30d: 0.93
      sign_stability_k: 5
      spread_gate_bps: 8
      depth_usd_min: 3000
      hedge_preference:
      - spot
      - dated_future
      - perp_proxy
    basis:
      enabled: true
      min_entry_apy: 0.17
      min_exit_apy: 0.08
      roll_threshold_days: 5
      dte_min_days: 14
      spread_gate_bps: 8
      depth_usd_min: 4000
      hedge_preference:
      - spot
      - perp
  no_trade_bands:
    enabled: true
    z_entry: 0.77
    z_exit: 0.51
  selection:
    dynamic_k:
      enabled: true
      k_min: 3
      k_max: 7
      kappa: 5.0
      fallback_k: 6
  gross_leverage: 0.92
  max_weight_per_asset: 0.14
  per_symbol_notional_cap_pct: 0.18
  portfolio_vol_target:
    enabled: true
    target_ann_vol: 0.35
    lookback_hours: 72
    min_scale: 0.6
    max_scale: 1.5
  adx_filter:
    enabled: true
    len: 14
    min_adx: 29
    require_rising: 1
    use_di_alignment: 1
  regime_filter:
    enabled: true
    ema_len: 200
    slope_min_bps_per_day: 1.8
    use_abs: 0
  majors_regime:
    enabled: true
    majors:
    - BTC/USDT:USDT
    - ETH/USDT:USDT
    ema_len: 200
    slope_bps_per_day: 1.2
    action: downweight
    downweight_factor: 0.5
  kelly:
    enabled: true
    base_frac: 0.5
    half_kelly: 1
    min_scale: 0.7
    max_scale: 1.3
risk:
  kill_switch:
    daily_loss_pct: 6.0
    resume_after_minutes: 180
  risk_per_trade: 0.005
  atr_len: 28
  atr_mult_sl: 1.7
  trailing_sl:
    enabled: true
    type: ma_atr
    ma_len: 34
    atr_length: 28
    multiplier: 1.5
    cooldown_bars: 0
  fast_check_seconds: 30
  stop_timeframe: 5m
  stop_on_close_only: 0
  stop_confirm_bars: 0
  min_hold_minutes: 0
  trailing_debug: 0
  trailing_enabled: true
  trail_atr_mult: 1.6
logging:
  level: INFO
  to_file: 1
  file: /opt/xsmom-bot/logs/live.log
notes:
- Optimized via MC sweep (median Calmar). Wider bands reduce turnover; leverage tuned.
- Carry budget set from sweep; vol-target annualized from chosen daily baseline.
